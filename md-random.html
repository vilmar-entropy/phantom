
<!DOCTYPE html>
<html lang="en">
  <head>
  
 
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
  <meta name="viewport" content="width=device-width">

  <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>

  <script type="text/javascript" src="js/index.js"></script>

  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="assets/css/index.css" />

  <title>Random Test - Machine Design</title>
</head>
  <body>
	  
		<div id="content">
			<br>
			<span id="question"></span>
			<div id="choices"></div> 
			<button id="submit" class="button"> Submit Answer</button>
		</div>

	
	<script>
	
	  
  
	
	//start method 2


//How to use the apply the function
//var duplicates  =[];

for (var i = 1; i <= 6 ; i++) { 
   // document.write(getRandomIntNoDuplicates(1,10,duplicates));
}

//end 
/*
 //start method 1 to get random no. with no dupe
 var nums = [0,1,2];
 var gen_nums = [];

 function in_array(array, el) {
 for(var i = 0 ; i < array.length; i++) 
 if(array[i] == el) return true;
 return false;
 }

 function get_rand(array) {
 var rand = array[Math.floor(Math.random()*array.length)];
 if(!in_array(gen_nums, rand)) {
 gen_nums.push(rand); 
 return rand;
 }
 return get_rand(array);
 }
 */
for(var i = 0; i < 0; i++) {
    //document.write(get_rand(nums));
    //alert(get_rand(nums));
}
//end

//Prime
var quiz = []; 

//var quiz end

// define elements
var content = $("content"),
  questionContainer = $("question"),
  choicesContainer = $("choices"),
  submitBtn = $("submit");

// init vars
var currentQuestion = 0,
	score = 0,
  askingQuestion = true,
  questionNumber = 0,
  maxQ = 1,
  gCurrentQuestion;
  
  maxQ = prompt("How many items do you like?");
  wrongAnswerQ = "",
  wrongAnswerNo=0;
  var yourAnswer = "You did not pick any answer.";
  var choicesMistakesG = "";
  if(maxQ > quiz.length) {
	maxQ = quiz.length;
  }
  var isOnReviewWrongPage = false;
  var duplicates  =[];

function $(id) { // shortcut for document.getElementById
  return document.getElementById(id);
}

function askQuestion() {
//start method 1 to get random no. with no dupe

  var nums = [0,1,2,3];
var gen_nums = [];

function in_array(array, el) {
   for(var i = 0 ; i < array.length; i++) 
       if(array[i] == el) return true;
   return false;
}

function get_rand(array) {
    var rand = array[Math.floor(Math.random()*array.length)];
    if(!in_array(gen_nums, rand)) {
       gen_nums.push(rand); 
       return rand;
    }
    return get_rand(array);
}



function inArray(arr, el) {
    for(var i = 0 ; i < arr.length; i++) 
            if(arr[i] == el) return true;
    return false;
}

function getRandomIntNoDuplicates(min, max, DuplicateArr) {
    var RandomInt = Math.floor(Math.random() * (max - min + 1)) + min;
    if (DuplicateArr.length > (max-min) ) return false;  // break endless recursion
    if(!inArray(DuplicateArr, RandomInt)) {
       DuplicateArr.push(RandomInt); 
       return RandomInt;
    }
    return getRandomIntNoDuplicates(min, max, DuplicateArr); //recurse
}

//tempCurrentQuestion = get_rand(numsQuestion);
 gCurrentQuestion = getRandomIntNoDuplicates(0,quiz.length-1,duplicates);
 //alert(gCurrentQuestion);

  var choices = quiz[gCurrentQuestion].choices,
    choicesHtml = "", choicesMistakes="" ;
	var tempi;
	
	


  // loop through choices, and create radio buttons
  for (var i = 0; i < choices.length; i++) {
  //alert(get_rand(nums));
   tempi = get_rand(nums);
    choicesHtml += "<input type='radio' name='quiz" + gCurrentQuestion +
      "' id='choice" + ( tempi + 1) +
      "' value='" + choices[tempi] + "'>" +
      " <label for='choice" + (tempi + 1) + "'>" + choices[tempi] + "</label> <br>";
	  
	  choicesMistakes += "<span name='quiz" + gCurrentQuestion +
      "' id='choice" + (tempi + 1) +
      "' value='" + choices[tempi] + "'>"+ (i+1) + ". " + choices[tempi] + "</span><br>";
	   if(choices[tempi] === quiz[gCurrentQuestion].correct) {
			correctAnswer = choices[tempi];
			correctAnswerIndex = tempi;
	  }
	  
	  choicesMistakesG = choicesMistakes;
  }

  // load the question
  questionContainer.textContent = (questionNumber + 1) + ". " +
    quiz[gCurrentQuestion].question;

  // load the choices
  choicesContainer.innerHTML = choicesHtml;

  // setup for the first time
  if (questionNumber === 0) {
    submitBtn.textContent = "Submit Answer";
	//alert(quiz.length);
  }

  clear();
}

function checkAnswer() {
	var yourAnswer = "You did not pick any answer.";
  // are we asking a question, or proceeding to next question?
  if (askingQuestion) {
    submitBtn.textContent = "Next Question";
    askingQuestion = false;

    // determine which radio button they clicked
    var userpick,
      correctIndex,
      radios = document.getElementsByName("quiz" + gCurrentQuestion);
    for (var i = 0; i < radios.length; i++) {
      if (radios[i].checked) { // if this radio button is checked
        userpick = radios[i].value;
		yourAnswer = userpick;
      }

      // get index of correct answer
      if (radios[i].value == quiz[gCurrentQuestion].correct) {
        correctIndex = i;
      }
    }

    // setup if they got it right, or wrong
    var labelStyle = document.getElementsByTagName("label")[correctIndex].style;
    labelStyle.fontWeight = "bold";
    if (userpick == quiz[gCurrentQuestion].correct) {
      labelStyle.color = "green";
	  score++;
    } else {
		wrongAnswerNo++;
      labelStyle.color = "red";
	  wrongAnswerQ += "<br> <span id='question'> " + wrongAnswerNo+". " + quiz[gCurrentQuestion].question + "</span><br> " + "<div>" + choicesMistakesG + " <strong id='answer'>" + "Correct answer: " + correctAnswer  + "</strong></div> ";//  + 

    }

 
  } else { // move to next question
    // setting up so user can ask a question
    askingQuestion = true;
    // change button text back to "Submit Answer"
    submitBtn.textContent = "Submit Answer";
    // if we're not on last question, increase question number
    if (questionNumber < maxQ - 1) {
      //currentQuestion++;
	  questionNumber++;
      askQuestion();
    } else {
      showFinalResults();
    }
	
  }
}


function showFinalResults() {
	isOnReviewWrongPage = true;
	
	if(score === maxQ) {
	  var answer = confirm ("Congrats buddy. You got perfect. " + score + " out of " + maxQ +  " . Do you want to restart the test?");
	  if (answer)
			reloadCurrentPage();
	  else
		  document.location.href = "contents-quiz.html";
	} else if(score/maxQ >= 0.6){
	  var answer = confirm ("You passed the test. Congrats. You got " + score + " out of " + maxQ +  ".  " + Math.floor(score/maxQ*100) +"%. Do you want to restart the test? Press cancel if you like to review your incorrectly answered questions.");
	  if (answer)
		 reloadCurrentPage();
	  else
		content.innerHTML = wrongAnswerQ;
	} else {
	  var answer = confirm ("You failed. You need at least 60%  right answers. You got " + score + " out of " + maxQ + ".  " + Math.floor(score/maxQ*100) + "% . Do you want to restart the test? Press cancel if you like to review your incorrectly answered questions.");
	  if (answer)
		 reloadCurrentPage();
	  else
		 content.innerHTML = wrongAnswerQ;
	}
}

function reloadCurrentPage() {
	if(isOnReviewWrongPage) {
		window.location.reload(true);
	} else {
		var restart = confirm("Are you sure you want to restart and leave the current test?");
		if(restart)  {
			alert ("You got " + score + " out of " + maxQ +   ".");
			  window.location.reload(true);
		}
	}
}

function exitTest() {

	if(isOnReviewWrongPage) {
		document.location.href = "contents-quiz.html";
	} else {
		var restart = confirm("Are you sure you want to leave the current test?");
		if(restart)  {
			alert ("You got " + score + " out of " + maxQ +  ". Time elapsed:  " + timeElapsed + ".");
			  document.location.href = "contents-quiz.html";
		}
	}
}

window.addEventListener("load", askQuestion, false);
submitBtn.addEventListener("click", checkAnswer, false);
$("reloadCurrentPage").addEventListener("click", reloadCurrentPage, false);
$("exitTest").addEventListener("click", exitTest, false);



</script>

<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
			
			
	  
	 
	  <script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-100005074-1', 'auto');
			  ga('send', 'pageview');

		</script>
		
		
					<div class="adsForDesktop">
							<!-- <img id="adsPortrait" src="images/ads.jpg" alt="image"/> -->
							
							<!-- Start of StatCounter Code for Default Guide -->
							<script type="text/javascript">
								var sc_project=11354570; 
								var sc_invisible=0; 
								var sc_security="d06d77bd"; 
								var scJsHost = (("https:" == document.location.protocol) ?
								"https://secure." : "http://www.");
								document.write("<sc"+"ript type='text/javascript' src='" +
								scJsHost+
								"statcounter.com/counter/counter.js'></"+"script>");
							</script>
							<noscript>
								<div class="statcounter">
									<a title="web stats"
										href="http://statcounter.com/" target="_blank"><img
										class="statcounter"
										src="//c.statcounter.com/11354570/0/d06d77bd/0/" alt="web
										stats">
									</a>
								</div>
							</noscript>
							<!-- End of StatCounter Code for Default Guide -->
						</div>	
						

</body>
</html>
